<canvas debug="true" width="800" height="800">
	
	<include href="../lps/videoconference/base/vcrtmpconnection.lzx"/>
	
	<vcrtmpconnection name="rc" autoconnect="false" soSend="true" soReceive="true">
		
		<handler name="onconnect">
			Debug.write("connected");
		</handler>
		
		<handler name="onerror">
			Debug.write("error ", this.status);
		</handler>
		
		<handler name="onsosync">
			<![CDATA[
			Debug.write("xx" + this.soMessage);
			messages.text = this.soMessage;
			]]>
		</handler>
		
		<method name="sendMessage" args="mess">
			if (this.soSend) {
				this._sharedObjectS.send("messageHandler", mess);
			}
		</method>
		
	</vcrtmpconnection>
	
	<handler name="oninit">
		Debug.write("Init so tester");
		var url = "rtmp://172.0.2.139:1935/conference";
		rc.setAttribute("src", url);
		rc.connect("E301F2FC47B5FB160D1211273FD11D16");
	</handler>
	
	
	<view id="v2" layout="axis:y; spacing:4">
		<text id="messages" multiline="true" width="300" height="200"/>
		<button text="send">
			<handler name="onclick">
				rc.sendMessage("Hello world");
			</handler>
		</button>
	</view>
</canvas>
